# PrivateKey 보안 강화 가이드

## 🎯 핵심 원칙

1. **절대 하드코딩 금지**: 코드에 privateKey를 직접 작성하지 않기
2. **암호화 저장**: 저장 시 반드시 암호화
3. **생체 인증**: 키 접근 시 생체 인증 필수
4. **메모리 보호**: 사용 후 즉시 메모리에서 제거
5. **최소 권한**: 필요한 경우에만 키 로드

## 🔒 보안 강화 방법

### 1. 암호화 저장 (AES-256-GCM)

**특징:**
- 사용자 비밀번호 기반 암호화
- PBKDF2로 키 파생 (100,000회 반복)
- AES-256-GCM 사용 (인증 태그 포함)
- Salt와 IV 랜덤 생성

**보안 수준:** ⭐⭐⭐⭐

### 2. Secure Storage 사용

**iOS Keychain:**
- 하드웨어 보안 모듈 활용
- 앱 삭제 시에도 유지 가능
- 잠금 해제 시에만 접근 가능

**Android Keystore:**
- 하드웨어 보안 모듈 활용
- TEE(Trusted Execution Environment) 사용
- 루팅된 기기에서도 보호

**보안 수준:** ⭐⭐⭐⭐⭐

### 3. 생체 인증 연동

**지원:**
- Face ID / Touch ID (iOS)
- 지문 인식 (Android)
- PIN 코드 (대체)

**보안 수준:** ⭐⭐⭐⭐

### 4. 메모리 보호

**방법:**
- 키를 메모리에만 임시 저장 (5분)
- 사용 후 즉시 덮어쓰기
- 앱 백그라운드 시 자동 제거

**보안 수준:** ⭐⭐⭐

### 5. 키 분할 (Shamir's Secret Sharing)

**방법:**
- 키를 여러 조각으로 분할
- 일부만 있어도 복구 불가능
- 여러 디바이스에 분산 저장

**보안 수준:** ⭐⭐⭐⭐⭐

## 🛡️ 추가 보안 방법

### 6. 다중 서명 (Multi-Signature)

**방법:**
- 여러 키로 서명 필요
- 일부 키가 유출되어도 안전

**보안 수준:** ⭐⭐⭐⭐⭐

### 7. 하드웨어 지갑 연동

**방법:**
- Ledger, Trezor 등 하드웨어 지갑 사용
- PrivateKey는 하드웨어에만 존재

**보안 수준:** ⭐⭐⭐⭐⭐

### 8. 결제 한도 설정

**방법:**
- 일일 결제 한도 설정
- 큰 금액 결제 시 추가 인증

**보안 수준:** ⭐⭐⭐

### 9. 트랜잭션 서명 전 확인

**방법:**
- 결제 전 사용자에게 정보 표시
- 금액, 주소, 수수료 확인

**보안 수준:** ⭐⭐⭐

### 10. 앱 보호 (코드 난독화)

**방법:**
- ProGuard / R8 (Android)
- 코드 난독화
- 디버깅 방지

**보안 수준:** ⭐⭐

## 📊 보안 수준 비교

| 방법 | 보안 수준 | 구현 난이도 | 권장도 |
|------|----------|------------|--------|
| 암호화 저장 | ⭐⭐⭐⭐ | 중 | ✅ 필수 |
| Secure Storage | ⭐⭐⭐⭐⭐ | 중 | ✅ 필수 |
| 생체 인증 | ⭐⭐⭐⭐ | 중 | ✅ 필수 |
| 메모리 보호 | ⭐⭐⭐ | 하 | ✅ 권장 |
| 키 분할 | ⭐⭐⭐⭐⭐ | 상 | ⚠️ 선택 |
| 하드웨어 지갑 | ⭐⭐⭐⭐⭐ | 상 | ⚠️ 선택 |
| 다중 서명 | ⭐⭐⭐⭐⭐ | 상 | ⚠️ 선택 |

## 🚀 권장 구현 조합

### 기본 보안 (필수)
1. ✅ 암호화 저장 (AES-256-GCM)
2. ✅ Secure Storage 사용
3. ✅ 생체 인증 연동
4. ✅ 메모리 보호

### 고급 보안 (선택)
5. ⚠️ 키 분할
6. ⚠️ 다중 서명
7. ⚠️ 하드웨어 지갑 연동

## ⚠️ 주의사항

1. **비밀번호 관리**
   - 사용자가 비밀번호를 잊어버리면 키 복구 불가능
   - 복구 메커니즘 고려 필요

2. **백업**
   - 암호화된 키 백업 방법 고려
   - 여러 디바이스 동기화 방법

3. **키 로테이션**
   - 정기적으로 새 키 생성 권장
   - 오래된 키는 사용 중지

4. **로깅**
   - PrivateKey를 로그에 출력하지 않기
   - 디버그 모드에서도 주의

5. **네트워크**
   - 키를 네트워크로 전송하지 않기
   - HTTPS만 사용

## 🔍 보안 체크리스트

- [ ] PrivateKey가 코드에 하드코딩되지 않음
- [ ] 저장 시 암호화됨 (AES-256 이상)
- [ ] Secure Storage 사용 (Keychain/Keystore)
- [ ] 생체 인증 연동됨
- [ ] 메모리에서 사용 후 즉시 제거
- [ ] 로그에 키가 출력되지 않음
- [ ] 네트워크로 키가 전송되지 않음
- [ ] 앱 백그라운드 시 키 제거
- [ ] 루팅/탈옥 감지 및 경고
- [ ] 디버깅 모드 감지 및 차단

